syntax = "proto3";

option csharp_namespace = "GameProtocol";

package greet;

// 게이트웨이 서버
//
// 여기서 로그인/로그아웃은 클라이언트의 실행 종료 시 스폰된 객체를 지우는 용도입니다.
// 이 데모에선 세션이나 토큰을 사용한 인증을 진행하지 않습니다.
service GatewayServer {
  // 로그인
  rpc Login(LoginRequest) returns (LoginResponse);
  
  // 로그아웃
  rpc Logout(LogoutRequest) returns (LogoutResponse);
  
  // 나의 정보를 주기적으로 방송하는 RPC
  rpc Publish (stream PublishRequest) returns (PublishResponse);
  
  // 내 위치 주위의 정보를 수신받는 RPC
  rpc Subscribe (SubscribeRequest) returns (stream SubscribeResponse);
}

message LoginRequest {
  string playerId = 1;
}

message LoginResponse {
}

message LogoutRequest {
  string playerId = 1;
}

message LogoutResponse {
}

message SubscribeRequest {
  string playerId = 1;
}

message SubscribeResponse {
  repeated PlayerPosition playerPositionList = 1;
}

message PublishRequest {
  PlayerPosition playerPosition = 1;
}

message PublishResponse {
  string message = 1;
}

message PlayerPosition {
  string playerId = 1;
  double x = 2;
  double y = 3;
  double z = 4;
  double pitch = 5;
  double yaw = 6;
  double roll = 7;
}